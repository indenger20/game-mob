{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/index.js","js/model.js","js/presenter.js","js/static/DOMmethods.js","js/static/eventObj.js","js/view.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\r\nlet View = require('./view');\r\nlet DOMmethods = require('./static/DOMmethods');\r\nlet Presenter = require('./presenter');\r\n\r\nlet myGame = new Presenter(new View());\r\n\r\nmyGame.newGame();\r\n\r\nDOMmethods.getId('btn').addEventListener('click', function(e) {\r\n    myGame.reset();\r\n    console.log(myGame)\r\n    e.preventDefault()\r\n})","let eventObj = require('./static/eventObj');\r\n\r\n\r\n\r\nmodule.exports = {\r\n\r\n    getSize() {\r\n        return new Promise((resolve, reject)=> {\r\n            eventObj.ajaxGet('size', function(data) {\r\n                resolve(data);\r\n            })\r\n\r\n        })\r\n    },\r\n\r\n    getImgToIndex(index) {\r\n\r\n        return new Promise((resolve, reject)=> {\r\n            eventObj.ajaxGet(`/imgToIndex?index=${index}`, function(data) {\r\n                resolve(data);\r\n            });\r\n\r\n        })\r\n    },\r\n    isCheck(index1, index2) {\r\n        return new Promise((resolve, reject)=> {\r\n            eventObj.ajaxGet(`/isCheck?index1=${index1}&index2=${index2}`, function(data) {\r\n                resolve(data);\r\n            })\r\n\r\n        })\r\n    }\r\n\r\n}","let eventObj = require('./static/eventObj');\r\nlet DOMmethods = require('./static/DOMmethods');\r\nlet model = require('./model');\r\n\r\n\r\nmodule.exports = function (view) {\r\n    let thet = this;\r\n\r\n    view.on('firstOpen', function( target, index ) {\r\n        model.getImgToIndex(index).then( data => {\r\n            view.openImg(target, data.img);\r\n        });\r\n    });\r\n\r\n    view.on('doubleOpen', function( target, index, prevIndex ) {\r\n        view.disableEvent();\r\n        model.getImgToIndex(index).then( data => {\r\n            view.openImg(target, data.img);\r\n            view.enableEvent();\r\n        });\r\n        model.isCheck(index,prevIndex).then(data=> {\r\n                let isCheck = data.flag;\r\n            if(isCheck) {\r\n                view.blockedImg(index, prevIndex);\r\n                view.enableEvent();\r\n            }else {\r\n                setTimeout(function () {\r\n                    view.closeImg();\r\n                    view.enableEvent();\r\n                }, 500);\r\n            }\r\n        })\r\n\r\n\r\n\r\n    });\r\n\r\n    view.on('finish', function() {\r\n        console.log('finish')\r\n        thet.resetGame();\r\n    });\r\n\r\n    this.resetGame = function() {\r\n        view.removeGame();\r\n        thet.newGame();\r\n    }\r\n\r\n    this.newGame = function() {\r\n        model.getSize().then((data)=> {\r\n            let width = data.width <= 8 ? data.width : 8,\r\n            height = data.height <= 8 ? data.height: 8;\r\n\r\n            view.render(width, height);\r\n\r\n        });\r\n    }\r\n\r\n    return {\r\n        newGame: this.newGame,\r\n        reset: this.resetGame\r\n    }\r\n\r\n\r\n}","let eventObj = require('./eventObj');\r\nmodule.exports =  {\r\n    getId(id) {\r\n        return document.getElementById(id)\r\n    },\r\n\r\n    getTag(tag) {\r\n        return document.getElementsByTagName(tag)\r\n    },\r\n\r\n    getAttr(event, attr) {\r\n        let target = eventObj.getTarget(event);\r\n        let data = target.getAttribute(attr);\r\n\r\n        return data;\r\n    },\r\n\r\n    getName(name) {\r\n        return document.getElementsByName(name);\r\n    },\r\n\r\n    getClass(className) {\r\n        return document.getElementsByClassName(className)\r\n    },\r\n\r\n    getStyle(id) {\r\n        this.getId(id);\r\n        return window.getComputedStyle(this.getId(id))\r\n    },\r\n\r\n    addClass(id, className) {\r\n        var e = this.getId(id);\r\n        return e.classList.add(className);\r\n    },\r\n\r\n    removeClass(id, className) {\r\n        var e = this.getId(id);\r\n        return e.classList.remove(className);\r\n    }\r\n}","module.exports = {\r\n    addEvent: function (e, type, fn) {\r\n        if (typeof addEventListener !== 'undefined') {\r\n            e.addEventListener(type, fn, false);\r\n        } else if (typeof attachEvent !== 'undefined') {\r\n            e.attachEvent('on' + type, fn);\r\n        } else {\r\n            e['on' + type] = fn;\r\n        }\r\n    },\r\n\r\n    removeEvent: function (e, type, fn) {\r\n        if (typeof removeEventListener !== 'undefined') {\r\n            e.removeEventListener(type, fn, false);\r\n        } else if (typeof attachEvent !== 'undefined') {\r\n            e.detachEvent('on' + type, fn);\r\n        } else {\r\n            e['on' + type] = null;\r\n        }\r\n    },\r\n\r\n    getTarget: function (event) {\r\n        var event = window.event || event;\r\n        if (typeof event.target !== 'undefined') {\r\n            return event.target;\r\n        } else {\r\n            return evt.srcElement;\r\n        }\r\n    },\r\n\r\n    preventDefault: function (event) {\r\n        if (typeof event.preventDefault !== 'undefined') {\r\n            event.preventDefault();\r\n        } else {\r\n            event.returnValue = false;\r\n        }\r\n    },\r\n\r\n    ajaxGet: function (url, callback) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('GET', url, true);\r\n        xhr.onreadystatechange = function(){\r\n            if (this.readyState == 4) {\r\n                if (this.status == 200)\r\n                    callback(JSON.parse(this.responseText));\r\n                // иначе сетевая ошибка\r\n            }\r\n        };\r\n        xhr.send(null);\r\n    }\r\n}","let eventObj = require('./static/eventObj');\r\nlet DOMmethods = require('./static/DOMmethods');\r\n\r\nclass View {\r\n    constructor() {\r\n        let thet = this;\r\n        let flag = false;\r\n        this.allLinks = null;\r\n\r\n        this.handlers = {};\r\n\r\n        this.onHandle = function(e = window.event) {\r\n            let $this = e.target;\r\n\r\n            if( $this.dataset.id ) {\r\n                let index = $this.dataset.id ? $this.dataset.id : null;\r\n\r\n                if(index) {\r\n                    let flag = index ? $this.classList.contains('active') : null;\r\n                    let firstOpen = thet.checkAllActive('active', thet.getAvailableLinks());\r\n\r\n                    if(!firstOpen && !flag) {\r\n                        thet.trigger('firstOpen', e.target, index);\r\n                    }else if( firstOpen && !flag ) {\r\n                        thet.trigger('doubleOpen', e.target, index, firstOpen);\r\n                    }\r\n                }\r\n\r\n                let closedElems = thet.getAvailableLinks();\r\n                if(closedElems.length === 2) {\r\n                    setTimeout(()=> {\r\n                        let closedElems = thet.getAvailableLinks();\r\n                        if(!closedElems.length) {\r\n                            thet.trigger('finish');\r\n                        }\r\n                    }, 200)\r\n                }\r\n\r\n            }\r\n        };\r\n\r\n        this.offHandle = function(e = window.event) {\r\n            e.preventDefault();\r\n        }\r\n\r\n        DOMmethods.getId('container').addEventListener('click', this.onHandle, true);\r\n    }\r\n\r\n    render(width, height) {\r\n        let list = document.createElement('ul');\r\n        list.classList.add('game-app__list');\r\n        let counter = 0;\r\n        for(let i = 0; i < height; i++) {\r\n            let row = document.createElement('div');\r\n            for(var j = 0; j < width; j++) {\r\n                counter++;\r\n                let item = document.createElement('li');\r\n                let btn = document.createElement('div');\r\n                let img = document.createElement('img');\r\n\r\n                item.classList.add('game-app__item');\r\n\r\n                btn.classList.add('game-app__link');\r\n                btn.dataset.id = counter;\r\n\r\n                img.classList.add('game-app__img');\r\n                img.src = 'image/default.png';\r\n\r\n                item.style.width = `calc(100%/${width}`;\r\n                btn.appendChild(img);\r\n                item.appendChild(btn);\r\n\r\n                row.classList.add('game-app__row');\r\n                row.append(item);\r\n            }\r\n            list.appendChild(row);\r\n        }\r\n        DOMmethods.getId('container').appendChild(list);\r\n    }\r\n\r\n    on(event, fn) {\r\n        this.handlers[event] = this.handlers[event] || [];\r\n\r\n        if (this.handlers[event].indexOf(fn) === -1) {\r\n            this.handlers[event].push(fn);\r\n        }\r\n    }\r\n\r\n    trigger(event) {\r\n        if (this.handlers[event]) {\r\n            var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n            this.handlers[event].forEach(function(fn) {\r\n                fn.apply(null, args);\r\n            });\r\n        }\r\n    }\r\n\r\n    openImg(target, src, flag) {\r\n        target.children[0].src = src;\r\n        target.classList.add('active');\r\n    }\r\n\r\n    closeImg() {\r\n        let allImg = View.prototype.getAvailableLinks();\r\n        for(let i = 0; i < allImg.length; i++) {\r\n            allImg[i].classList.remove('active');\r\n            allImg[i].children[0].src = 'image/default.png';\r\n        }\r\n    }\r\n\r\n    getAllLinks() {\r\n        return DOMmethods.getClass('game-app__link');\r\n    }\r\n\r\n    getAvailableLinks() {\r\n        let allElems = DOMmethods.getClass('game-app__link');\r\n        let filterElems = [];\r\n        for(let i = 0; i < allElems.length; i++) {\r\n            if( !allElems[i].classList.contains('isClose') ) {\r\n                filterElems.push(allElems[i]);\r\n            }\r\n        }\r\n        return filterElems;\r\n    }\r\n\r\n    checkAllActive(className, elems) {\r\n        let res = false;\r\n        for(let el of elems) {\r\n           if(el.classList.contains(className)) {\r\n               res = el.dataset.id;\r\n               break;\r\n           }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    blockedImg(firstIndex, secondIndex) {\r\n        let allBlocks = View.prototype.getAllLinks();\r\n        for(let i = 0; i < allBlocks.length; i++) {\r\n            if( allBlocks[i].dataset.id == firstIndex || allBlocks[i].dataset.id == secondIndex ) {\r\n                allBlocks[i].classList.add('isClose');\r\n            }\r\n        }\r\n    }\r\n\r\n    removeGame() {\r\n        let elems = DOMmethods.getId('container').children;\r\n        for(let i = 0; i < elems.length; i++) {\r\n            elems[i].remove();\r\n        }\r\n    }\r\n\r\n    disableEvent() {\r\n        DOMmethods.getId('container').removeEventListener('click', this.onHandle, true);\r\n    }\r\n\r\n    enableEvent() {\r\n        DOMmethods.getId('container').addEventListener('click', this.onHandle, true);\r\n    }\r\n\r\n}\r\n\r\n\r\nmodule.exports = View;"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqc1xcaW5kZXguanMiLCJqc1xcbW9kZWwuanMiLCJqc1xccHJlc2VudGVyLmpzIiwianNcXHN0YXRpY1xcRE9NbWV0aG9kcy5qcyIsImpzXFxzdGF0aWNcXGV2ZW50T2JqLmpzIiwianNcXHZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQ0EsSUFBSSxPQUFPLFFBQVEsUUFBUixDQUFYO0FBQ0EsSUFBSSxhQUFhLFFBQVEscUJBQVIsQ0FBakI7QUFDQSxJQUFJLFlBQVksUUFBUSxhQUFSLENBQWhCOztBQUVBLElBQUksU0FBUyxJQUFJLFNBQUosQ0FBYyxJQUFJLElBQUosRUFBZCxDQUFiOztBQUVBLE9BQU8sT0FBUDs7QUFFQSxXQUFXLEtBQVgsQ0FBaUIsS0FBakIsRUFBd0IsZ0JBQXhCLENBQXlDLE9BQXpDLEVBQWtELFVBQVMsQ0FBVCxFQUFZO0FBQzFELFdBQU8sS0FBUDtBQUNBLFlBQVEsR0FBUixDQUFZLE1BQVo7QUFDQSxNQUFFLGNBQUY7QUFDSCxDQUpEOzs7QUNUQSxJQUFJLFdBQVcsUUFBUSxtQkFBUixDQUFmOztBQUlBLE9BQU8sT0FBUCxHQUFpQjs7QUFFYixjQUFVO0FBQ04sZUFBTyxJQUFJLE9BQUosQ0FBWSxDQUFDLE9BQUQsRUFBVSxNQUFWLEtBQW9CO0FBQ25DLHFCQUFTLE9BQVQsQ0FBaUIsTUFBakIsRUFBeUIsVUFBUyxJQUFULEVBQWU7QUFDcEMsd0JBQVEsSUFBUjtBQUNILGFBRkQ7QUFJSCxTQUxNLENBQVA7QUFNSCxLQVRZOztBQVdiLGtCQUFjLEtBQWQsRUFBcUI7O0FBRWpCLGVBQU8sSUFBSSxPQUFKLENBQVksQ0FBQyxPQUFELEVBQVUsTUFBVixLQUFvQjtBQUNuQyxxQkFBUyxPQUFULENBQWtCLHFCQUFvQixLQUFNLEVBQTVDLEVBQStDLFVBQVMsSUFBVCxFQUFlO0FBQzFELHdCQUFRLElBQVI7QUFDSCxhQUZEO0FBSUgs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QUFlLFdBQWYsRUFBaEI7QUFDQSxhQUFJLElBQUksSUFBSSxDQUFaLEVBQWUsSUFBSSxVQUFVLE1BQTdCLEVBQXFDLEdBQXJDLEVBQTBDO0FBQ3RDLGdCQUFJLFVBQVUsQ0FBVixFQUFhLE9BQWIsQ0FBcUIsRUFBckIsSUFBMkIsVUFBM0IsSUFBeUMsVUFBVSxDQUFWLEVBQWEsT0FBYixDQUFxQixFQUFyQixJQUEyQixXQUF4RSxFQUFzRjtBQUNsRiwwQkFBVSxDQUFWLEVBQWEsU0FBYixDQUF1QixHQUF2QixDQUEyQixTQUEzQjtBQUNIO0FBQ0o7QUFDSjs7QUFFRCxpQkFBYTtBQUNULFlBQUksUUFBUSxXQUFXLEtBQVgsQ0FBaUIsV0FBakIsRUFBOEIsUUFBMUM7QUFDQSxhQUFJLElBQUksSUFBSSxDQUFaLEVBQWUsSUFBSSxNQUFNLE1BQXpCLEVBQWlDLEdBQWpDLEVBQXNDO0FBQ2xDLGtCQUFNLENBQU4sRUFBUyxNQUFUO0FBQ0g7QUFDSjs7QUFFRCxtQkFBZTtBQUNYLG1CQUFXLEtBQVgsQ0FBaUIsV0FBakIsRUFBOEIsbUJBQTlCLENBQWtELE9BQWxELEVBQTJELEtBQUssUUFBaEUsRUFBMEUsSUFBMUU7QUFDSDs7QUFFRCxrQkFBYztBQUNWLG1CQUFXLEtBQVgsQ0FBaUIsV0FBakIsRUFBOEIsZ0JBQTlCLENBQStDLE9BQS9DLEVBQXdELEtBQUssUUFBN0QsRUFBdUUsSUFBdkU7QUFDSDs7QUE1Sk07O0FBaUtYLE9BQU8sT0FBUCxHQUFpQixJQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcclxubGV0IFZpZXcgPSByZXF1aXJlKCcuL3ZpZXcnKTtcclxubGV0IERPTW1ldGhvZHMgPSByZXF1aXJlKCcuL3N0YXRpYy9ET01tZXRob2RzJyk7XHJcbmxldCBQcmVzZW50ZXIgPSByZXF1aXJlKCcuL3ByZXNlbnRlcicpO1xyXG5cclxubGV0IG15R2FtZSA9IG5ldyBQcmVzZW50ZXIobmV3IFZpZXcoKSk7XHJcblxyXG5teUdhbWUubmV3R2FtZSgpO1xyXG5cclxuRE9NbWV0aG9kcy5nZXRJZCgnYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICBteUdhbWUucmVzZXQoKTtcclxuICAgIGNvbnNvbGUubG9nKG15R2FtZSlcclxuICAgIGUucHJldmVudERlZmF1bHQoKVxyXG59KSIsImxldCBldmVudE9iaiA9IHJlcXVpcmUoJy4vc3RhdGljL2V2ZW50T2JqJyk7XHJcblxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cclxuICAgIGdldFNpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT4ge1xyXG4gICAgICAgICAgICBldmVudE9iai5hamF4R2V0KCdzaXplJywgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0SW1nVG9JbmRleChpbmRleCkge1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PiB7XHJcbiAgICAgICAgICAgIGV2ZW50T2JqLmFqYXhHZXQoYC9pbWdUb0luZGV4P2luZGV4PSR7aW5kZXh9YCwgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAgaXNDaGVjayhpbmRleDEsIGluZGV4Mikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+IHtcclxuICAgICAgICAgICAgZXZlbnRPYmouYWpheEdldChgL2lzQ2hlY2s/aW5kZXgxPSR7aW5kZXgxfSZpbmRleDI9JHtpbmRleDJ9YCwgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbn0iLCJsZXQgZXZlbnRPYmogPSByZXF1aXJlKCcuL3N0YXRpYy9ldmVudE9iaicpO1xyXG5sZXQgRE9NbWV0aG9kcyA9IHJlcXVpcmUoJy4vc3RhdGljL0RPTW1ldGhvZHMnKTtcclxubGV0IG1vZGVsID0gcmVxdWlyZSgnLi9tb2RlbCcpO1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHZpZXcpIHtcclxuICAgIGxldCB0aGV0ID0gdGhpcztcclxuXHJcbiAgICB2aWV3Lm9uKCdmaXJzdE9wZW4nLCBmdW5jdGlvbiggdGFyZ2V0LCBpbmRleCApIHtcclxuICAgICAgICBtb2RlbC5nZXRJbWdUb0luZGV4KGluZGV4KS50aGVuKCBkYXRhID0+IHtcclxuICAgICAgICAgICAgdmlldy5vcGVuSW1nKHRhcmdldCwgZGF0YS5pbWcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmlldy5vbignZG91YmxlT3BlbicsIGZ1bmN0aW9uKCB0YXJnZXQsIGluZGV4LCBwcmV2SW5kZXggKSB7XHJcbiAgICAgICAgdmlldy5kaXNhYmxlRXZlbnQoKTtcclxuICAgICAgICBtb2RlbC5nZXRJbWdUb0luZGV4KGluZGV4KS50aGVuKCBkYXRhID0+IHtcclxuICAgICAgICAgICAgdmlldy5vcGVuSW1nKHRhcmdldCwgZGF0YS5pbWcpO1xyXG4gICAgICAgICAgICB2aWV3LmVuYWJsZUV2ZW50KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbW9kZWwuaXNDaGVjayhpbmRleCxwcmV2SW5kZXgpLnRoZW4oZGF0YT0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBpc0NoZWNrID0gZGF0YS5mbGFnO1xyXG4gICAgICAgICAgICBpZihpc0NoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICB2aWV3LmJsb2NrZWRJbWcoaW5kZXgsIHByZXZJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB2aWV3LmVuYWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY2xvc2VJbWcoKTtcclxuICAgICAgICAgICAgICAgICAgICB2aWV3LmVuYWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcblxyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIHZpZXcub24oJ2ZpbmlzaCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdmaW5pc2gnKVxyXG4gICAgICAgIHRoZXQucmVzZXRHYW1lKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnJlc2V0R2FtZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZpZXcucmVtb3ZlR2FtZSgpO1xyXG4gICAgICAgIHRoZXQubmV3R2FtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubmV3R2FtZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG1vZGVsLmdldFNpemUoKS50aGVuKChkYXRhKT0+IHtcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gZGF0YS53aWR0aCA8PSA4ID8gZGF0YS53aWR0aCA6IDgsXHJcbiAgICAgICAgICAgIGhlaWdodCA9IGRhdGEuaGVpZ2h0IDw9IDggPyBkYXRhLmhlaWdodDogODtcclxuXHJcbiAgICAgICAgICAgIHZpZXcucmVuZGVyKHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5ld0dhbWU6IHRoaXMubmV3R2FtZSxcclxuICAgICAgICByZXNldDogdGhpcy5yZXNldEdhbWVcclxuICAgIH1cclxuXHJcblxyXG59IiwibGV0IGV2ZW50T2JqID0gcmVxdWlyZSgnLi9ldmVudE9iaicpO1xyXG5tb2R1bGUuZXhwb3J0cyA9ICB7XHJcbiAgICBnZXRJZChpZCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZClcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0VGFnKHRhZykge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcpXHJcbiAgICB9LFxyXG5cclxuICAgIGdldEF0dHIoZXZlbnQsIGF0dHIpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnRPYmouZ2V0VGFyZ2V0KGV2ZW50KTtcclxuICAgICAgICBsZXQgZGF0YSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoYXR0cik7XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXROYW1lKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUobmFtZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldENsYXNzKGNsYXNzTmFtZSkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSlcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0U3R5bGUoaWQpIHtcclxuICAgICAgICB0aGlzLmdldElkKGlkKTtcclxuICAgICAgICByZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5nZXRJZChpZCkpXHJcbiAgICB9LFxyXG5cclxuICAgIGFkZENsYXNzKGlkLCBjbGFzc05hbWUpIHtcclxuICAgICAgICB2YXIgZSA9IHRoaXMuZ2V0SWQoaWQpO1xyXG4gICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcclxuICAgIH0sXHJcblxyXG4gICAgcmVtb3ZlQ2xhc3MoaWQsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgIHZhciBlID0gdGhpcy5nZXRJZChpZCk7XHJcbiAgICAgICAgcmV0dXJuIGUuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xyXG4gICAgfVxyXG59IiwibW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBhZGRFdmVudDogZnVuY3Rpb24gKGUsIHR5cGUsIGZuKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhZGRFdmVudExpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGZhbHNlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhdHRhY2hFdmVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgZS5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgZm4pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVbJ29uJyArIHR5cGVdID0gZm47XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICByZW1vdmVFdmVudDogZnVuY3Rpb24gKGUsIHR5cGUsIGZuKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiByZW1vdmVFdmVudExpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBlLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGZhbHNlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhdHRhY2hFdmVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgZS5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgZm4pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVbJ29uJyArIHR5cGVdID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFRhcmdldDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gd2luZG93LmV2ZW50IHx8IGV2ZW50O1xyXG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnQudGFyZ2V0ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBldnQuc3JjRWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGV2ZW50LnByZXZlbnREZWZhdWx0ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBhamF4R2V0OiBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcclxuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpKTtcclxuICAgICAgICAgICAgICAgIC8vINC40L3QsNGH0LUg0YHQtdGC0LXQstCw0Y8g0L7RiNC40LHQutCwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHhoci5zZW5kKG51bGwpO1xyXG4gICAgfVxyXG59IiwibGV0IGV2ZW50T2JqID0gcmVxdWlyZSgnLi9zdGF0aWMvZXZlbnRPYmonKTtcclxubGV0IERPTW1ldGhvZHMgPSByZXF1aXJlKCcuL3N0YXRpYy9ET01tZXRob2RzJyk7XHJcblxyXG5jbGFzcyBWaWV3IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGxldCB0aGV0ID0gdGhpcztcclxuICAgICAgICBsZXQgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYWxsTGlua3MgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmhhbmRsZXJzID0ge307XHJcblxyXG4gICAgICAgIHRoaXMub25IYW5kbGUgPSBmdW5jdGlvbihlID0gd2luZG93LmV2ZW50KSB7XHJcbiAgICAgICAgICAgIGxldCAkdGhpcyA9IGUudGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgaWYoICR0aGlzLmRhdGFzZXQuaWQgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAkdGhpcy5kYXRhc2V0LmlkID8gJHRoaXMuZGF0YXNldC5pZCA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmxhZyA9IGluZGV4ID8gJHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpcnN0T3BlbiA9IHRoZXQuY2hlY2tBbGxBY3RpdmUoJ2FjdGl2ZScsIHRoZXQuZ2V0QXZhaWxhYmxlTGlua3MoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFmaXJzdE9wZW4gJiYgIWZsYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhldC50cmlnZ2VyKCdmaXJzdE9wZW4nLCBlLnRhcmdldCwgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCBmaXJzdE9wZW4gJiYgIWZsYWcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZXQudHJpZ2dlcignZG91YmxlT3BlbicsIGUudGFyZ2V0LCBpbmRleCwgZmlyc3RPcGVuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNsb3NlZEVsZW1zID0gdGhldC5nZXRBdmFpbGFibGVMaW5rcygpO1xyXG4gICAgICAgICAgICAgICAgaWYoY2xvc2VkRWxlbXMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNsb3NlZEVsZW1zID0gdGhldC5nZXRBdmFpbGFibGVMaW5rcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighY2xvc2VkRWxlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGV0LnRyaWdnZXIoJ2ZpbmlzaCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMub2ZmSGFuZGxlID0gZnVuY3Rpb24oZSA9IHdpbmRvdy5ldmVudCkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBET01tZXRob2RzLmdldElkKCdjb250YWluZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25IYW5kbGUsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcih3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAgbGV0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgICAgIGxpc3QuY2xhc3NMaXN0LmFkZCgnZ2FtZS1hcHBfX2xpc3QnKTtcclxuICAgICAgICBsZXQgY291bnRlciA9IDA7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHdpZHRoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvdW50ZXIrKztcclxuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgICAgICAgICAgIGxldCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGxldCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2dhbWUtYXBwX19pdGVtJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2dhbWUtYXBwX19saW5rJyk7XHJcbiAgICAgICAgICAgICAgICBidG4uZGF0YXNldC5pZCA9IGNvdW50ZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoJ2dhbWUtYXBwX19pbWcnKTtcclxuICAgICAgICAgICAgICAgIGltZy5zcmMgPSAnaW1hZ2UvZGVmYXVsdC5wbmcnO1xyXG5cclxuICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUud2lkdGggPSBgY2FsYygxMDAlLyR7d2lkdGh9YDtcclxuICAgICAgICAgICAgICAgIGJ0bi5hcHBlbmRDaGlsZChpbWcpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChidG4pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdnYW1lLWFwcF9fcm93Jyk7XHJcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQocm93KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgRE9NbWV0aG9kcy5nZXRJZCgnY29udGFpbmVyJykuYXBwZW5kQ2hpbGQobGlzdCk7XHJcbiAgICB9XHJcblxyXG4gICAgb24oZXZlbnQsIGZuKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyc1tldmVudF0gPSB0aGlzLmhhbmRsZXJzW2V2ZW50XSB8fCBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxlcnNbZXZlbnRdLmluZGV4T2YoZm4pID09PSAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzW2V2ZW50XS5wdXNoKGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdHJpZ2dlcihldmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhhbmRsZXJzW2V2ZW50XSkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzW2V2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW5JbWcodGFyZ2V0LCBzcmMsIGZsYWcpIHtcclxuICAgICAgICB0YXJnZXQuY2hpbGRyZW5bMF0uc3JjID0gc3JjO1xyXG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZUltZygpIHtcclxuICAgICAgICBsZXQgYWxsSW1nID0gVmlldy5wcm90b3R5cGUuZ2V0QXZhaWxhYmxlTGlua3MoKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYWxsSW1nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFsbEltZ1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgYWxsSW1nW2ldLmNoaWxkcmVuWzBdLnNyYyA9ICdpbWFnZS9kZWZhdWx0LnBuZyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbExpbmtzKCkge1xyXG4gICAgICAgIHJldHVybiBET01tZXRob2RzLmdldENsYXNzKCdnYW1lLWFwcF9fbGluaycpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEF2YWlsYWJsZUxpbmtzKCkge1xyXG4gICAgICAgIGxldCBhbGxFbGVtcyA9IERPTW1ldGhvZHMuZ2V0Q2xhc3MoJ2dhbWUtYXBwX19saW5rJyk7XHJcbiAgICAgICAgbGV0IGZpbHRlckVsZW1zID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGFsbEVsZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKCAhYWxsRWxlbXNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdpc0Nsb3NlJykgKSB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJFbGVtcy5wdXNoKGFsbEVsZW1zW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmlsdGVyRWxlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tBbGxBY3RpdmUoY2xhc3NOYW1lLCBlbGVtcykge1xyXG4gICAgICAgIGxldCByZXMgPSBmYWxzZTtcclxuICAgICAgICBmb3IobGV0IGVsIG9mIGVsZW1zKSB7XHJcbiAgICAgICAgICAgaWYoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgcmVzID0gZWwuZGF0YXNldC5pZDtcclxuICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIGJsb2NrZWRJbWcoZmlyc3RJbmRleCwgc2Vjb25kSW5kZXgpIHtcclxuICAgICAgICBsZXQgYWxsQmxvY2tzID0gVmlldy5wcm90b3R5cGUuZ2V0QWxsTGlua3MoKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYWxsQmxvY2tzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKCBhbGxCbG9ja3NbaV0uZGF0YXNldC5pZCA9PSBmaXJzdEluZGV4IHx8IGFsbEJsb2Nrc1tpXS5kYXRhc2V0LmlkID09IHNlY29uZEluZGV4ICkge1xyXG4gICAgICAgICAgICAgICAgYWxsQmxvY2tzW2ldLmNsYXNzTGlzdC5hZGQoJ2lzQ2xvc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVHYW1lKCkge1xyXG4gICAgICAgIGxldCBlbGVtcyA9IERPTW1ldGhvZHMuZ2V0SWQoJ2NvbnRhaW5lcicpLmNoaWxkcmVuO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBlbGVtc1tpXS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzYWJsZUV2ZW50KCkge1xyXG4gICAgICAgIERPTW1ldGhvZHMuZ2V0SWQoJ2NvbnRhaW5lcicpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkhhbmRsZSwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlRXZlbnQoKSB7XHJcbiAgICAgICAgRE9NbWV0aG9kcy5nZXRJZCgnY29udGFpbmVyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uSGFuZGxlLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXc7Il19"}